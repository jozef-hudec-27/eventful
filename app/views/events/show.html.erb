<div class="event-detail">
    <h2><%= @event.name %></h2>
    <p><%= @event.description %></p>
    <p><%= @event.attendees.count %> attendees</p>
</div>

<% if current_user == @event.organizer %>
    <%= link_to 'Delete', event_path(@event), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this event?' } %>
    <%= link_to 'Update', edit_event_path(@event) %>
<% end %>

<form action="<%= event_register_toggle_path %>" style="display: none;" id="event-register-toggle-form" method="post">
    <input type="hidden" name="id" value="<%= @event.id %>">
</form>

<% if user_signed_in? && @event.organizer != current_user %>
    <input type="submit"
           form="event-register-toggle-form"
           value="<% if @event.attendees.exists?(current_user.id) %>Unregister<% else %>Register<% end %>"
    >
<% end %>